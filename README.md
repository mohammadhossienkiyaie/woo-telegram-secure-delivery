# Secure Telegram Delivery for WooCommerce

این پروژه یک راهکار حرفه‌ای و ایمن برای تحویل فایل‌های خریداری شده در ووکامرس از طریق ربات تلگرام است.

## ویژگی‌ها
- **معماری شیءگرا:** کد به صورت کاملاً ماژولار و قابل توسعه بازنویسی شده است.
- **امنیت بالا:** 
    - استفاده از فایل `.env` برای مدیریت توکن‌ها و اطلاعات حساس.
    - تایید اصالت درخواست‌های تلگرام از طریق `secret_token`.
    - جلوگیری از دسترسی مستقیم به لاگ‌ها با `.htaccess`.
- **مدیریت هوشمند توکن:** جلوگیری از استفاده مجدد توکن‌ها و مدیریت وضعیت‌های مختلف (Valid, Used, Processing).
- **لاگ‌گذاری سیستماتیک:** ثبت خطاها و رویدادها در فایل‌های مجزا.

## ساختار پروژه
- `src/Core`: شامل منطق اصلی برنامه، پیکربندی و لاگ‌گذاری.
- `src/Telegram`: مدیریت ارتباط با API تلگرام.
- `src/WordPress`: تعامل با دیتابیس وردپرس و سفارشات ووکامرس.
- `webhook.php`: نقطه ورود ایمن برای درخواست‌های تلگرام.

## نحوه نصب
1. فایل `.env.example` را به `.env` تغییر نام دهید و مقادیر مربوطه (توکن ربات، آیدی کانال منبع و غیره) را پر کنید.
2. آدرس `webhook.php` را به عنوان وب‌هوک در ربات تلگرام خود تنظیم کنید.
    - پیشنهاد می‌شود از `secret_token` برای امنیت بیشتر استفاده کنید.
3. اطمینان حاصل کنید که پوشه `logs` دسترسی نوشتن دارد.

## نکات امنیتی
- هرگز فایل `.env` را در گیت پوش نکنید (در فایل `.gitignore` قرار داده شده است).
- برای امنیت حداکثری، از قابلیت `X-Telegram-Bot-Api-Secret-Token` در تنظیم وب‌هوک استفاده کنید.
